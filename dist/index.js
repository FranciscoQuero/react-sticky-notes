module.exports=function(e){function t(t){for(var n,r,i=t[0],c=t[1],a=0,s=[];a<i.length;a++)r=i[a],o[r]&&s.push(o[r][0]),o[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(u&&u(t);s.length;)s.shift()()}var n={},o={0:0};function r(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise(function(t,r){n=o[e]=[t,r]});t.push(n[2]=i);var c,a=document.getElementsByTagName("head")[0],u=document.createElement("script");u.charset="utf-8",u.timeout=120,r.nc&&u.setAttribute("nonce",r.nc),u.src=function(e){return r.p+""+e+".index.js"}(e),c=function(t){u.onerror=u.onload=null,clearTimeout(s);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src,c=new Error("Loading chunk "+e+" failed.\n("+r+": "+i+")");c.type=r,c.request=i,n[1](c)}o[e]=void 0}};var s=setTimeout(function(){c({type:"timeout",target:u})},12e4);u.onerror=u.onload=c,a.appendChild(u)}return Promise.all(t)},r.m=e,r.c=n,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r.oe=function(e){throw console.error(e),e};var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var a=0;a<i.length;a++)t(i[a]);var u=c;return r(r.s=8)}({0:function(e,t,n){"use strict";var o=n(1),r=n.n(o).a.createElement,i=function(){for(var e=[],t=0;t<360;t+=18)e.push("hsl(".concat(t,",50%, 50%)"));return e}(),c=function(e){return e?e.replace(/(?:\r\n|\r|\n)/g,"<br>"):""},a=function(e,t){return localStorage.getItem("react-sticky-notes")?JSON.parse(localStorage.getItem("react-sticky-notes")):t||[{text:"",position:{x:0,y:0},color:e[Math.floor(Math.random()*e.length)],selected:!0}]},u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};switch(e){case"container":n={position:"absolute",width:t.containerWidth,height:t.containerHeight,backgroundColor:t.backgroundColor};break;case"note":n={position:"absolute",backgroundColor:t.color,zIndex:t.selected?1:0,transform:"translate3d(".concat(t.position.x,"px,").concat(t.position.y,"px,0)")};break;case"note-body":n={width:t.width,height:t.height,backgroundColor:t.toggle===t.index+1&&t.selected?"#ffffff":"",maxHeight:"".concat(t.containerHeight-t.position.y-34,"px"),resize:"both",overflow:"auto"};break;case"note-input":n={height:"100%"};break;case"note-header":n={visibility:t.selected?"visible":"hidden"};break;case"menu":n={height:"100%"};break;case"note-color-selector":n={backgroundColor:t.colorCode}}return n};n.d(t,"d",function(){return r}),n.d(t,"a",function(){return i}),n.d(t,"h",function(){return c}),n.d(t,"c",function(){return a}),n.d(t,"b",function(){return u}),n.d(t,"e",function(){return"+"}),n.d(t,"f",function(){return"•••"}),n.d(t,"g",function(){return"x"})},1:function(e,t){e.exports=require("react")},8:function(e,t,n){"use strict";n.r(t);var o=n(1);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=function(e,t){var n=e.items;switch(t.type){case"add":(n=n.map(function(e,t){return e.selected=!1,e})).splice(t.payload.index,0,t.payload);break;case"update":n=n.map(function(e,n){return n===t.payload.index?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r(e,t,n[t])})}return e}({},e,t.payload):e});break;case"delete":n.splice(t.payload.index,1);break;case"select":n=n.map(function(e,n){return e.selected=n===t.payload.index,e});break;default:n=e.items}return{items:n}},c=n(0);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){d(e,t,n[t])})}return e}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(f(n=function(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?f(e):t}(this,l(t).call(this,e))),"dispatch",function(e){var t=e.type,o=e.payload;n.setState(i(n.state,{type:t,payload:o}),function(){n.props.sessionKey&&localStorage.setItem(n.props.sessionKey,JSON.stringify(n.state.items)),n.props.onChange&&n.props.onChange(n.state.items)})}),d(f(n),"addItem",function(e){var t={index:e?e.index+1:n.state.items.length,color:n.getColor(),text:"",selected:!0,position:{x:0,y:0}};n.dispatch({type:"add",payload:u({},t)})}),d(f(n),"updateItem",function(e,t){n.dispatch({type:"update",payload:u({index:e},t)})}),d(f(n),"selectItem",function(e,t){n.dispatch({type:"select",payload:u({index:e},t)})}),d(f(n),"deleteItem",function(e){n.dispatch({type:"delete",payload:{index:e}})}),n.state={component:null,items:Object(c.c)(e.colorCodes,e.notes)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,o["Component"]),function(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this;this.props.useCSS?(console.log("notes-with-style"),n.e(1).then(n.bind(null,9)).then(function(t){console.log("notes-with-style",t),e.setState({component:t.default})})):n.e(1).then(n.bind(null,7)).then(function(t){console.log("notes",t),e.setState({component:t.default})}).catch(function(e){console.log(e)})}},{key:"getColor",value:function(){return this.props.colorCodes[Math.floor(Math.random()*this.props.colorCodes.length)]}},{key:"render",value:function(){var e=this.state.items,t=this.props,n=t.width,o=t.height,r=t.containerWidth,i=t.containerHeight,a=t.backgroundColor,u=t.icons,s=t.prefix,l=t.displayFooter;return this.state.component?Object(c.d)(this.state.component,{displayFooter:l,items:e,prefix:s,width:n,height:o,containerWidth:r,containerHeight:i,backgroundColor:a,icons:u,addItem:this.addItem,updateItem:this.updateItem,selectItem:this.selectItem,deleteItem:this.deleteItem,colorCodes:c.a}):null}}]),t}();d(h,"defaultProps",{useCSS:!0,prefix:"s-notes",colorCodes:c.a,displayFooter:!0,sessionKey:"react-sticky-notes",width:220,height:220,containerWidth:"100%",containerHeight:"100%",icons:{add:c.e,menu:c.f,trash:c.g}});var y=h;t.default=y}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvcmVhY3Qtc3RpY2t5LW5vdGVzL3V0aWxzL2guanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvcmVhY3Qtc3RpY2t5LW5vdGVzL3V0aWxzL2NvbG9yLWNvZGVzLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3JlYWN0LXN0aWNreS1ub3Rlcy91dGlscy9ubC10by1ici5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9yZWFjdC1zdGlja3ktbm90ZXMvdXRpbHMvZ2V0LW5vdGVzLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3JlYWN0LXN0aWNreS1ub3Rlcy91dGlscy9nZXQtZWxlbWVudC1zdHlsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9yZWFjdC1zdGlja3ktbm90ZXMvdXRpbHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvcmVhY3Qtc3RpY2t5LW5vdGVzL3V0aWxzL2ljb25zLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcInJlYWN0XCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvcmVhY3Qtc3RpY2t5LW5vdGVzL3JlZHVjZXJzL3JlZHVjZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvcmVhY3Qtc3RpY2t5LW5vdGVzL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJ3ZWJwYWNrSnNvbnBDYWxsYmFjayIsImRhdGEiLCJtb2R1bGVJZCIsImNodW5rSWQiLCJjaHVua0lkcyIsIm1vcmVNb2R1bGVzIiwiaSIsInJlc29sdmVzIiwibGVuZ3RoIiwiaW5zdGFsbGVkQ2h1bmtzIiwicHVzaCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIm1vZHVsZXMiLCJwYXJlbnRKc29ucEZ1bmN0aW9uIiwic2hpZnQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiMCIsIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwibW9kdWxlIiwibCIsImUiLCJwcm9taXNlcyIsImluc3RhbGxlZENodW5rRGF0YSIsInByb21pc2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIm9uU2NyaXB0Q29tcGxldGUiLCJoZWFkIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInNjcmlwdCIsImNyZWF0ZUVsZW1lbnQiLCJjaGFyc2V0IiwidGltZW91dCIsIm5jIiwic2V0QXR0cmlidXRlIiwic3JjIiwicCIsImpzb25wU2NyaXB0U3JjIiwiZXZlbnQiLCJvbmVycm9yIiwib25sb2FkIiwiY2xlYXJUaW1lb3V0IiwiY2h1bmsiLCJlcnJvclR5cGUiLCJ0eXBlIiwicmVhbFNyYyIsInRhcmdldCIsImVycm9yIiwiRXJyb3IiLCJyZXF1ZXN0IiwidW5kZWZpbmVkIiwic2V0VGltZW91dCIsImFwcGVuZENoaWxkIiwiYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsIm9lIiwiZXJyIiwiY29uc29sZSIsImpzb25wQXJyYXkiLCJ3aW5kb3ciLCJvbGRKc29ucEZ1bmN0aW9uIiwic2xpY2UiLCJzIiwiaCIsIlJlYWN0IiwiZ2V0Q29sb3JDb2RlcyIsImNvZGVzIiwiY29uY2F0IiwibmxUb0JyIiwic3RyIiwicmVwbGFjZSIsImdldE5vdGVzIiwiY29sb3JDb2RlcyIsIm5vdGVzIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIkpTT04iLCJwYXJzZSIsInRleHQiLCJwb3NpdGlvbiIsIngiLCJ5IiwiY29sb3IiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJzZWxlY3RlZCIsImdldEVsZW1lbnRTdHlsZSIsIm5vZGVOYW1lIiwicHJvcHMiLCJzdHlsZSIsImFyZ3VtZW50cyIsIndpZHRoIiwiY29udGFpbmVyV2lkdGgiLCJoZWlnaHQiLCJjb250YWluZXJIZWlnaHQiLCJiYWNrZ3JvdW5kQ29sb3IiLCJ6SW5kZXgiLCJ0cmFuc2Zvcm0iLCJ0b2dnbGUiLCJpbmRleCIsIm1heEhlaWdodCIsInJlc2l6ZSIsIm92ZXJmbG93IiwidmlzaWJpbGl0eSIsImNvbG9yQ29kZSIsIl9fd2VicGFja19leHBvcnRzX18iLCJjb2xvcl9jb2RlcyIsInJlcXVpcmUiLCJyZWR1Y2VyIiwic3RhdGUiLCJhY3Rpb24iLCJpdGVtcyIsIm1hcCIsIml0ZW0iLCJzcGxpY2UiLCJwYXlsb2FkIiwiX29iamVjdFNwcmVhZCIsIlJlYWN0U3RpY2t5Tm90ZXMiLCJfdGhpcyIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJyZWFjdF9zdGlja3lfbm90ZXNfZGVmaW5lUHJvcGVydHkiLCJfYXNzZXJ0VGhpc0luaXRpYWxpemVkIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJfZ2V0UHJvdG90eXBlT2YiLCJfcmVmIiwic2V0U3RhdGUiLCJzZXNzaW9uS2V5Iiwic2V0SXRlbSIsInN0cmluZ2lmeSIsIm9uQ2hhbmdlIiwib3B0aW9ucyIsIm5ld1Byb3BzIiwiZ2V0Q29sb3IiLCJkaXNwYXRjaCIsInJlYWN0X3N0aWNreV9ub3Rlc19vYmplY3RTcHJlYWQiLCJjb21wb25lbnQiLCJDb21wb25lbnQiLCJfdGhpczIiLCJ1c2VDU1MiLCJsb2ciLCJ0aGVuIiwiX3RoaXMkcHJvcHMiLCJpY29ucyIsInByZWZpeCIsImRpc3BsYXlGb290ZXIiLCJhZGRJdGVtIiwidXBkYXRlSXRlbSIsInNlbGVjdEl0ZW0iLCJkZWxldGVJdGVtIiwiYWRkIiwiaWNvbkFkZCIsIm1lbnUiLCJpY29uTWVudSIsInRyYXNoIiwiaWNvblRy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V0FDakJDLFdBQVk3QixLQUFLNkIsV0FDakI5RSxpQkFDRyxnQkE1SEE4QyxrQkFFSnNCLFFBQVEsRUFDUkssT0FBUSxVQUNSekUsZUFDQTBFLGVBQWUsRUFDZmxCLFdBQVkscUJBQ1pwQyxNQUFPLElBQ1BFLE9BQVEsSUFDUkQsZUFBZ0IsT0FDaEJFLGdCQUFpQixPQUNqQmlELE9BQ0NPLElBQUtDLElBQ0xDLEtBQU1DLElBQ05DLE1BQU9DLE9Ba0hLdEMsUUNsSUFBIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG4gXHRmdW5jdGlvbiB3ZWJwYWNrSnNvbnBDYWxsYmFjayhkYXRhKSB7XG4gXHRcdHZhciBjaHVua0lkcyA9IGRhdGFbMF07XG4gXHRcdHZhciBtb3JlTW9kdWxlcyA9IGRhdGFbMV07XG5cblxuIFx0XHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcbiBcdFx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG4gXHRcdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDAsIHJlc29sdmVzID0gW107XG4gXHRcdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuIFx0XHRcdGlmKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuIFx0XHRcdFx0cmVzb2x2ZXMucHVzaChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0pO1xuIFx0XHRcdH1cbiBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuIFx0XHR9XG4gXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG4gXHRcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHR9XG4gXHRcdH1cbiBcdFx0aWYocGFyZW50SnNvbnBGdW5jdGlvbikgcGFyZW50SnNvbnBGdW5jdGlvbihkYXRhKTtcblxuIFx0XHR3aGlsZShyZXNvbHZlcy5sZW5ndGgpIHtcbiBcdFx0XHRyZXNvbHZlcy5zaGlmdCgpKCk7XG4gXHRcdH1cblxuIFx0fTtcblxuXG4gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuIFx0Ly8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4gXHQvLyBQcm9taXNlID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxuIFx0dmFyIGluc3RhbGxlZENodW5rcyA9IHtcbiBcdFx0MDogMFxuIFx0fTtcblxuXG5cbiBcdC8vIHNjcmlwdCBwYXRoIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBqc29ucFNjcmlwdFNyYyhjaHVua0lkKSB7XG4gXHRcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBcIlwiICsgY2h1bmtJZCArIFwiLmluZGV4LmpzXCJcbiBcdH1cblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG4gXHQvLyBUaGlzIGZpbGUgY29udGFpbnMgb25seSB0aGUgZW50cnkgY2h1bmsuXG4gXHQvLyBUaGUgY2h1bmsgbG9hZGluZyBmdW5jdGlvbiBmb3IgYWRkaXRpb25hbCBjaHVua3NcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZSA9IGZ1bmN0aW9uIHJlcXVpcmVFbnN1cmUoY2h1bmtJZCkge1xuIFx0XHR2YXIgcHJvbWlzZXMgPSBbXTtcblxuXG4gXHRcdC8vIEpTT05QIGNodW5rIGxvYWRpbmcgZm9yIGphdmFzY3JpcHRcblxuIFx0XHR2YXIgaW5zdGFsbGVkQ2h1bmtEYXRhID0gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdO1xuIFx0XHRpZihpbnN0YWxsZWRDaHVua0RhdGEgIT09IDApIHsgLy8gMCBtZWFucyBcImFscmVhZHkgaW5zdGFsbGVkXCIuXG5cbiBcdFx0XHQvLyBhIFByb21pc2UgbWVhbnMgXCJjdXJyZW50bHkgbG9hZGluZ1wiLlxuIFx0XHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSkge1xuIFx0XHRcdFx0cHJvbWlzZXMucHVzaChpbnN0YWxsZWRDaHVua0RhdGFbMl0pO1xuIFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHQvLyBzZXR1cCBQcm9taXNlIGluIGNodW5rIGNhY2hlXG4gXHRcdFx0XHR2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuIFx0XHRcdFx0XHRpbnN0YWxsZWRDaHVua0RhdGEgPSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSBbcmVzb2x2ZSwgcmVqZWN0XTtcbiBcdFx0XHRcdH0pO1xuIFx0XHRcdFx0cHJvbWlzZXMucHVzaChpbnN0YWxsZWRDaHVua0RhdGFbMl0gPSBwcm9taXNlKTtcblxuIFx0XHRcdFx0Ly8gc3RhcnQgY2h1bmsgbG9hZGluZ1xuIFx0XHRcdFx0dmFyIGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xuIFx0XHRcdFx0dmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuIFx0XHRcdFx0dmFyIG9uU2NyaXB0Q29tcGxldGU7XG5cbiBcdFx0XHRcdHNjcmlwdC5jaGFyc2V0ID0gJ3V0Zi04JztcbiBcdFx0XHRcdHNjcmlwdC50aW1lb3V0ID0gMTIwO1xuIFx0XHRcdFx0aWYgKF9fd2VicGFja19yZXF1aXJlX18ubmMpIHtcbiBcdFx0XHRcdFx0c2NyaXB0LnNldEF0dHJpYnV0ZShcIm5vbmNlXCIsIF9fd2VicGFja19yZXF1aXJlX18ubmMpO1xuIFx0XHRcdFx0fVxuIFx0XHRcdFx0c2NyaXB0LnNyYyA9IGpzb25wU2NyaXB0U3JjKGNodW5rSWQpO1xuXG4gXHRcdFx0XHRvblNjcmlwdENvbXBsZXRlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gXHRcdFx0XHRcdC8vIGF2b2lkIG1lbSBsZWFrcyBpbiBJRS5cbiBcdFx0XHRcdFx0c2NyaXB0Lm9uZXJyb3IgPSBzY3JpcHQub25sb2FkID0gbnVsbDtcbiBcdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuIFx0XHRcdFx0XHR2YXIgY2h1bmsgPSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF07XG4gXHRcdFx0XHRcdGlmKGNodW5rICE9PSAwKSB7XG4gXHRcdFx0XHRcdFx0aWYoY2h1bmspIHtcbiBcdFx0XHRcdFx0XHRcdHZhciBlcnJvclR5cGUgPSBldmVudCAmJiAoZXZlbnQudHlwZSA9PT0gJ2xvYWQnID8gJ21pc3NpbmcnIDogZXZlbnQudHlwZSk7XG4gXHRcdFx0XHRcdFx0XHR2YXIgcmVhbFNyYyA9IGV2ZW50ICYmIGV2ZW50LnRhcmdldCAmJiBldmVudC50YXJnZXQuc3JjO1xuIFx0XHRcdFx0XHRcdFx0dmFyIGVycm9yID0gbmV3IEVycm9yKCdMb2FkaW5nIGNodW5rICcgKyBjaHVua0lkICsgJyBmYWlsZWQuXFxuKCcgKyBlcnJvclR5cGUgKyAnOiAnICsgcmVhbFNyYyArICcpJyk7XG4gXHRcdFx0XHRcdFx0XHRlcnJvci50eXBlID0gZXJyb3JUeXBlO1xuIFx0XHRcdFx0XHRcdFx0ZXJyb3IucmVxdWVzdCA9IHJlYWxTcmM7XG4gXHRcdFx0XHRcdFx0XHRjaHVua1sxXShlcnJvcik7XG4gXHRcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IHVuZGVmaW5lZDtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0fTtcbiBcdFx0XHRcdHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xuIFx0XHRcdFx0XHRvblNjcmlwdENvbXBsZXRlKHsgdHlwZTogJ3RpbWVvdXQnLCB0YXJnZXQ6IHNjcmlwdCB9KTtcbiBcdFx0XHRcdH0sIDEyMDAwMCk7XG4gXHRcdFx0XHRzY3JpcHQub25lcnJvciA9IHNjcmlwdC5vbmxvYWQgPSBvblNjcmlwdENvbXBsZXRlO1xuIFx0XHRcdFx0aGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuIFx0XHRcdH1cbiBcdFx0fVxuIFx0XHRyZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuIFx0fTtcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9kaXN0L1wiO1xuXG4gXHQvLyBvbiBlcnJvciBmdW5jdGlvbiBmb3IgYXN5bmMgbG9hZGluZ1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vZSA9IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmVycm9yKGVycik7IHRocm93IGVycjsgfTtcblxuIFx0dmFyIGpzb25wQXJyYXkgPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gfHwgW107XG4gXHR2YXIgb2xkSnNvbnBGdW5jdGlvbiA9IGpzb25wQXJyYXkucHVzaC5iaW5kKGpzb25wQXJyYXkpO1xuIFx0anNvbnBBcnJheS5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2s7XG4gXHRqc29ucEFycmF5ID0ganNvbnBBcnJheS5zbGljZSgpO1xuIFx0Zm9yKHZhciBpID0gMDsgaSA8IGpzb25wQXJyYXkubGVuZ3RoOyBpKyspIHdlYnBhY2tKc29ucENhbGxiYWNrKGpzb25wQXJyYXlbaV0pO1xuIFx0dmFyIHBhcmVudEpzb25wRnVuY3Rpb24gPSBvbGRKc29ucEZ1bmN0aW9uO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gOCk7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuZXhwb3J0IGNvbnN0IGggPSBSZWFjdC5jcmVhdGVFbGVtZW50OyIsImNvbnN0IGdldENvbG9yQ29kZXMgPSAoKSA9PiB7XG4gICAgY29uc3QgY29kZXMgPSBbXTtcbiAgICBmb3IobGV0IGk9MDtpPDM2MDtpKz0xOCl7XG4gICAgICAgIGNvZGVzLnB1c2goYGhzbCgke2l9LDUwJSwgNTAlKWApO1xuICAgIH1cbiAgICByZXR1cm4gY29kZXM7XG59O1xuZXhwb3J0IGRlZmF1bHQgZ2V0Q29sb3JDb2RlcygpOyIsImV4cG9ydCBjb25zdCBubFRvQnIgPSAoc3RyKSA9PiB7XG4gICAgcmV0dXJuIHN0cj9zdHIucmVwbGFjZSgvKD86XFxyXFxufFxccnxcXG4pL2csICc8YnI+Jyk6Jyc7XG59IiwiZXhwb3J0IGNvbnN0IGdldE5vdGVzID0gKGNvbG9yQ29kZXMsIG5vdGVzICkgPT4ge1xuXHRjb25zdCBfbm90ZXMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncmVhY3Qtc3RpY2t5LW5vdGVzJykgPyBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdyZWFjdC1zdGlja3ktbm90ZXMnKSkgOiBub3Rlcz9ub3RlczpbXG5cdFx0e1xuXHRcdFx0dGV4dDogJycsXG5cdFx0XHRwb3NpdGlvbjogeyB4OiAwLCB5OiAwIH0sXG5cdFx0XHRjb2xvcjogY29sb3JDb2Rlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjb2xvckNvZGVzLmxlbmd0aCldLFxuXHRcdFx0c2VsZWN0ZWQ6dHJ1ZVxuXHRcdH1cblx0XTtcblx0cmV0dXJuIF9ub3Rlcztcbn1cbiIsImV4cG9ydCBjb25zdCBnZXRFbGVtZW50U3R5bGUgPSAobm9kZU5hbWUsIHByb3BzLCBkZWZhdWx0U3R5bGU9e30pID0+IHtcclxuICAgIGxldCBzdHlsZSA9IGRlZmF1bHRTdHlsZTtcclxuICAgIHN3aXRjaChub2RlTmFtZSl7XHJcbiAgICAgICAgY2FzZSBcImNvbnRhaW5lclwiOlxyXG4gICAgICAgICAgICAgICAgc3R5bGUgPSB7IFxyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBwcm9wcy5jb250YWluZXJXaWR0aCwgXHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBwcm9wcy5jb250YWluZXJIZWlnaHQsIFxyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogcHJvcHMuYmFja2dyb3VuZENvbG9yIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJub3RlXCI6XHJcbiAgICAgICAgICAgICAgICBzdHlsZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcclxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHByb3BzLmNvbG9yLFxyXG4gICAgICAgICAgICAgICAgICAgIHpJbmRleDogcHJvcHMuc2VsZWN0ZWQ/MTowLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogYHRyYW5zbGF0ZTNkKCR7cHJvcHMucG9zaXRpb24ueH1weCwke3Byb3BzLnBvc2l0aW9uLnl9cHgsMClgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIm5vdGUtYm9keVwiOlxyXG4gICAgICAgICAgICBzdHlsZSA9IHtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiBwcm9wcy53aWR0aCxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogcHJvcHMuaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBwcm9wcy50b2dnbGU9PT1wcm9wcy5pbmRleCsxJiZwcm9wcy5zZWxlY3RlZD9cIiNmZmZmZmZcIjpcIlwiLFxyXG4gICAgICAgICAgICAgICAgbWF4SGVpZ2h0OiBgJHtwcm9wcy5jb250YWluZXJIZWlnaHQtcHJvcHMucG9zaXRpb24ueS0zNH1weGAsXHJcbiAgICAgICAgICAgICAgICByZXNpemU6XCJib3RoXCIsXHJcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogXCJhdXRvXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJub3RlLWlucHV0XCI6XHJcbiAgICAgICAgICAgIHN0eWxlID0ge1xyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBcIjEwMCVcIixcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJub3RlLWhlYWRlclwiOlxyXG4gICAgICAgICAgICBzdHlsZSA9IHtcclxuICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6IHByb3BzLnNlbGVjdGVkP1widmlzaWJsZVwiOlwiaGlkZGVuXCIsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwibWVudVwiOlxyXG4gICAgICAgICAgICBzdHlsZSA9IHtcclxuICAgICAgICAgICAgICAgIGhlaWdodDogXCIxMDAlXCIsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwibm90ZS1jb2xvci1zZWxlY3RvclwiOlxyXG4gICAgICAgICAgICBzdHlsZSA9IHtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogcHJvcHMuY29sb3JDb2RlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3R5bGU7XHJcbn0iLCJpbXBvcnQgeyBoIH0gZnJvbSAnLi9oJztcbmltcG9ydCBjb2xvckNvZGVzIGZyb20gJy4vY29sb3ItY29kZXMnO1xuaW1wb3J0IHsgbmxUb0JyIH0gZnJvbSAnLi9ubC10by1icic7XG5pbXBvcnQgeyBnZXROb3RlcyB9IGZyb20gJy4vZ2V0LW5vdGVzJztcbmltcG9ydCB7IGdldEVsZW1lbnRTdHlsZSB9IGZyb20gJy4vZ2V0LWVsZW1lbnQtc3R5bGUnO1xuaW1wb3J0IHsgaWNvbkFkZCwgaWNvbk1lbnUsIGljb25UcmFzaCB9IGZyb20gJy4vaWNvbnMnO1xuZXhwb3J0IHtcbiAgICBoLFxuICAgIGNvbG9yQ29kZXMsXG4gICAgbmxUb0JyLFxuICAgIGdldE5vdGVzLFxuICAgIGdldEVsZW1lbnRTdHlsZSxcbiAgICBpY29uQWRkLCBcbiAgICBpY29uTWVudSwgXG4gICAgaWNvblRyYXNoXG59XG4iLCJleHBvcnQgY29uc3QgaWNvbkFkZCA9ICcrJztcbmV4cG9ydCBjb25zdCBpY29uVHJhc2ggPSAneCc7XG5leHBvcnQgY29uc3QgaWNvbk1lbnUgPSAn4oCi4oCi4oCiJztcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInJlYWN0XCIpOyIsImNvbnN0IHJlZHVjZXIgPSAoc3RhdGUsIGFjdGlvbikgPT4ge1xuICAgIGxldCB7IGl0ZW1zIH0gPSBzdGF0ZTtcbiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICAgIGNhc2UgJ2FkZCc6XG4gICAgICAgICAgICBpdGVtcyA9IGl0ZW1zLm1hcCgoaXRlbSwgaW5kZXgpPT57XG4gICAgICAgICAgICAgICAgaXRlbS5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpdGVtcy5zcGxpY2UoYWN0aW9uLnBheWxvYWQuaW5kZXgsIDAsIGFjdGlvbi5wYXlsb2FkKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd1cGRhdGUnOlxuICAgICAgICAgICAgaXRlbXMgPSBpdGVtcy5tYXAoKGl0ZW0sIGluZGV4KT0+e1xuICAgICAgICAgICAgICAgIHJldHVybiBpbmRleD09PWFjdGlvbi5wYXlsb2FkLmluZGV4P3suLi5pdGVtLCAuLi5hY3Rpb24ucGF5bG9hZCB9Oml0ZW07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICAgICAgaXRlbXMuc3BsaWNlKGFjdGlvbi5wYXlsb2FkLmluZGV4LDEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3NlbGVjdCc6XG4gICAgICAgICAgICBpdGVtcyA9IGl0ZW1zLm1hcCgoaXRlbSwgaW5kZXgpPT57XG4gICAgICAgICAgICAgICAgaXRlbS5zZWxlY3RlZCA9IChpbmRleD09PWFjdGlvbi5wYXlsb2FkLmluZGV4KT90cnVlOmZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBpdGVtcyA9IHN0YXRlLml0ZW1zO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiB7aXRlbXN9O1xufVxuZXhwb3J0IGRlZmF1bHQgcmVkdWNlcjsiLCJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgcmVkdWNlciBmcm9tICcuL3JlZHVjZXJzL3JlZHVjZXInO1xuaW1wb3J0IHsgaCwgY29sb3JDb2RlcywgZ2V0Tm90ZXMsIGljb25BZGQsIGljb25NZW51LCBpY29uVHJhc2ggfSBmcm9tICcuL3V0aWxzJztcbmNsYXNzIFJlYWN0U3RpY2t5Tm90ZXMgZXh0ZW5kcyBDb21wb25lbnQge1xuXHRzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuXHRcdHVzZUNTUzogdHJ1ZSxcblx0XHRwcmVmaXg6ICdzLW5vdGVzJyxcblx0XHRjb2xvckNvZGVzLFxuXHRcdGRpc3BsYXlGb290ZXI6IHRydWUsXG5cdFx0c2Vzc2lvbktleTogJ3JlYWN0LXN0aWNreS1ub3RlcycsXG5cdFx0d2lkdGg6IDIyMCxcblx0XHRoZWlnaHQ6IDIyMCxcblx0XHRjb250YWluZXJXaWR0aDogJzEwMCUnLFxuXHRcdGNvbnRhaW5lckhlaWdodDogJzEwMCUnLFxuXHRcdGljb25zOiB7XG5cdFx0XHRhZGQ6IGljb25BZGQsXG5cdFx0XHRtZW51OiBpY29uTWVudSxcblx0XHRcdHRyYXNoOiBpY29uVHJhc2hcblx0XHR9XG5cdH1cblx0Y29uc3RydWN0b3IocHJvcHMpIHtcblx0XHRzdXBlcihwcm9wcyk7XG5cdFx0dGhpcy5zdGF0ZSA9IHtcblx0XHRcdGNvbXBvbmVudDogbnVsbCxcblx0XHRcdGl0ZW1zOiBnZXROb3Rlcyhwcm9wcy5jb2xvckNvZGVzLCBwcm9wcy5ub3Rlcylcblx0XHR9O1xuXHR9XG5cdGNvbXBvbmVudERpZE1vdW50KCl7XG5cdFx0aWYodGhpcy5wcm9wcy51c2VDU1Mpe1xuXHRcdFx0Y29uc29sZS5sb2coXCJub3Rlcy13aXRoLXN0eWxlXCIpO1xuXHRcdFx0aW1wb3J0KC8qIHdlYnBhY2tDaHVua05hbWU6IFwibm90ZXNcIiAqLyBcIi4vbm90ZXMtd2l0aC1zdHlsZVwiKS50aGVuKChjb21wb25lbnQpPT57XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdub3Rlcy13aXRoLXN0eWxlJyxjb21wb25lbnQpO1xuXHRcdFx0XHR0aGlzLnNldFN0YXRlKHtcblx0XHRcdFx0XHRjb21wb25lbnQ6IGNvbXBvbmVudC5kZWZhdWx0XG5cdFx0XHRcdH0pXG5cdFx0XHR9KTtcblx0XHR9ZWxzZXtcblx0XHRcdGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcIm5vdGVzXCIgKi8gJy4vbm90ZXMnKS50aGVuKChjb21wb25lbnQpPT57XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdub3RlcycsY29tcG9uZW50KTtcblx0XHRcdFx0dGhpcy5zZXRTdGF0ZSh7XG5cdFx0XHRcdFx0Y29tcG9uZW50OiBjb21wb25lbnQuZGVmYXVsdFxuXHRcdFx0XHR9KVxuXHRcdFx0fSkuY2F0Y2goKGVycik9Pntcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyKTsgXG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblx0ZGlzcGF0Y2ggPSAoeyB0eXBlLCBwYXlsb2FkIH0pID0+IHtcblx0XHR0aGlzLnNldFN0YXRlKFxuXHRcdFx0cmVkdWNlcih0aGlzLnN0YXRlLCB7IHR5cGUsIHBheWxvYWQgfSksXG5cdFx0XHQoKT0+e1xuXHRcdFx0XHRpZih0aGlzLnByb3BzLnNlc3Npb25LZXkpe1xuXHRcdFx0XHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMucHJvcHMuc2Vzc2lvbktleSwgSlNPTi5zdHJpbmdpZnkodGhpcy5zdGF0ZS5pdGVtcykpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKHRoaXMucHJvcHMub25DaGFuZ2Upe1xuXHRcdFx0XHRcdHRoaXMucHJvcHMub25DaGFuZ2UoXG5cdFx0XHRcdFx0XHR0aGlzLnN0YXRlLml0ZW1zXG5cdFx0XHRcdFx0KVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0KVxuXHR9XG5cdGdldENvbG9yKCkge1xuXHRcdHJldHVybiB0aGlzLnByb3BzLmNvbG9yQ29kZXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5wcm9wcy5jb2xvckNvZGVzLmxlbmd0aCldO1xuXHR9XG5cdGFkZEl0ZW0gPSAob3B0aW9ucykgPT4ge1xuXHRcdGNvbnN0IG5ld1Byb3BzID0ge1xuXHRcdFx0aW5kZXg6b3B0aW9ucz9vcHRpb25zLmluZGV4KzE6dGhpcy5zdGF0ZS5pdGVtcy5sZW5ndGgsXG5cdFx0XHRjb2xvcjogdGhpcy5nZXRDb2xvcigpLFxuXHRcdFx0dGV4dDogJycsXG5cdFx0XHRzZWxlY3RlZDogdHJ1ZSxcblx0XHRcdHBvc2l0aW9uOiB7XG5cdFx0XHRcdHg6IDAsXG5cdFx0XHRcdHk6IDBcblx0XHRcdH1cblx0XHR9XG5cdFx0dGhpcy5kaXNwYXRjaCh7XG5cdFx0XHR0eXBlOiAnYWRkJyxcblx0XHRcdHBheWxvYWQ6IHtcblx0XHRcdFx0Li4ubmV3UHJvcHNcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXHR1cGRhdGVJdGVtID0gKGluZGV4LCBuZXdQcm9wcykgPT4ge1xuXHRcdHRoaXMuZGlzcGF0Y2goe1xuXHRcdFx0dHlwZTogJ3VwZGF0ZScsXG5cdFx0XHRwYXlsb2FkOiB7XG5cdFx0XHRcdGluZGV4LFxuXHRcdFx0XHQuLi5uZXdQcm9wc1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdHNlbGVjdEl0ZW0gPSAoaW5kZXgsIG5ld1Byb3BzKSA9PiB7XG5cdFx0dGhpcy5kaXNwYXRjaCh7XG5cdFx0XHR0eXBlOiAnc2VsZWN0Jyxcblx0XHRcdHBheWxvYWQ6IHtcblx0XHRcdFx0aW5kZXgsXG5cdFx0XHRcdC4uLm5ld1Byb3BzXG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblx0ZGVsZXRlSXRlbSA9IChpbmRleCkgPT4ge1xuXHRcdHRoaXMuZGlzcGF0Y2goe1xuXHRcdFx0dHlwZTogJ2RlbGV0ZScsXG5cdFx0XHRwYXlsb2FkOiB7XG5cdFx0XHRcdGluZGV4XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblx0cmVuZGVyKCkge1xuXHRcdGNvbnN0IHsgaXRlbXMgfSA9IHRoaXMuc3RhdGU7XG5cdFx0Y29uc3QgeyB3aWR0aCwgaGVpZ2h0LCBjb250YWluZXJXaWR0aCwgY29udGFpbmVySGVpZ2h0LCBiYWNrZ3JvdW5kQ29sb3IsIGljb25zLCBwcmVmaXgsIGRpc3BsYXlGb290ZXIgfSA9IHRoaXMucHJvcHM7XG5cdFx0cmV0dXJuIHRoaXMuc3RhdGUuY29tcG9uZW50PyBoKHRoaXMuc3RhdGUuY29tcG9uZW50LCB7XG5cdFx0XHRkaXNwbGF5Rm9vdGVyLFxuXHRcdFx0aXRlbXMsXG5cdFx0XHRwcmVmaXgsXG5cdFx0XHR3aWR0aCxcblx0XHRcdGhlaWdodCxcblx0XHRcdGNvbnRhaW5lcldpZHRoLCBcblx0XHRcdGNvbnRhaW5lckhlaWdodCxcblx0XHRcdGJhY2tncm91bmRDb2xvcixcblx0XHRcdGljb25zLFxuXHRcdFx0YWRkSXRlbTogdGhpcy5hZGRJdGVtLFxuXHRcdFx0dXBkYXRlSXRlbTogdGhpcy51cGRhdGVJdGVtLFxuXHRcdFx0c2VsZWN0SXRlbTogdGhpcy5zZWxlY3RJdGVtLFxuXHRcdFx0ZGVsZXRlSXRlbTogdGhpcy5kZWxldGVJdGVtLFxuXHRcdFx0Y29sb3JDb2Rlc1xuXHRcdH0pIDpudWxsO1xuXHR9XG5cbn1cbmV4cG9ydCBkZWZhdWx0IFJlYWN0U3RpY2t5Tm90ZXM7XG4iLCJpbXBvcnQgUmVhY3RTdGlja3lOb3RlcyBmcm9tICcuL2NvbXBvbmVudHMvcmVhY3Qtc3RpY2t5LW5vdGVzJztcbmV4cG9ydCBkZWZhdWx0IFJlYWN0U3RpY2t5Tm90ZXM7Il0sInNvdXJjZVJvb3QiOiIifQ==